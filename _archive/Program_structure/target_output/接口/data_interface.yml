# ==============================================================================
# MODULE: F001 - 导航栏访问
# ==============================================================================
- type: Database
  id: DB-UserBasic
  description: 用户基础表
  implements: [F001, F007, F008, F011]
  columns: [id, username, password_hash, phone, avatar, status]

# ==============================================================================
# MODULE: F002 - 快捷入口访问
# ==============================================================================
- type: Database
  id: DB-SearchHistory
  description: 用户搜索历史表
  implements: [F002]
  columns: [id, user_id, from_code, to_code, search_time]

# ==============================================================================
# MODULE: F003 - 车票查询
# ==============================================================================
- type: Database
  id: DB-Station
  description: 车站基础数据
  implements: [F003]
  columns: [code, name, pinyin, is_hot]

- type: Database
  id: DB-TrainSchedule
  description: 车次时刻表
  implements: [F003, F006]
  columns: [train_no, station_code, arrive_time, depart_time, sequence]

- type: Database
  id: DB-SeatInventory
  description: 席位库存表
  implements: [F003, F005]
  columns: [train_date_id, seat_type, available_count]
  constraints: "Optimistic Locking for inventory deduction"

# ==============================================================================
# MODULE: F009 - 订单填写
# ==============================================================================
- type: Database
  id: DB-OrderMaster
  description: 订单主表
  implements: [F009, F010, F013, F014]
  columns: [order_id, user_id, total_amount, status, create_time, expire_time]

- type: Database
  id: DB-OrderItem
  description: 订单明细表（乘车人维度）
  implements: [F009, F010]
  columns: [item_id, order_id, passenger_id, seat_type, price]

# ==============================================================================
# MODULE: F012 - 乘客管理
# ==============================================================================
- type: Database
  id: DB-Passenger
  description: 常用乘车人表
  implements: [F012]
  columns: [id, user_id, name, id_type, id_no, phone, type]
  constraints: "Unique index on (user_id, id_no)"

# ==============================================================================
# MODULE: F014 - 订单支付
# ==============================================================================
- type: Database
  id: DB-PaymentFlow
  description: 支付流水表
  implements: [F014]
  columns: [flow_id, order_id, amount, channel, status, transaction_id]

# ==============================================================================
# MODULE: F015 - 车票改签
# ==============================================================================
- type: Database
  id: DB-ChangeLog
  description: 改签记录表
  implements: [F015]
  columns: [id, original_order_id, new_order_id, fee_diff, create_time]