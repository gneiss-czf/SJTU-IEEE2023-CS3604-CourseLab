# 层次化需求分析树 [v1.0]

## 顺序化功能明细（按页面分组）

1. 首页 (P001)
   1.1 导航栏访问 (F001)
   - "导航栏固定顶部 (F001-S01)"
   - "未登录显示登录/注册 (F001-S02)"
   - "已登录显示用户名头像 (F001-S03)"
   - "主入口：首页/查询/个人中心 (F001-S04)"
   - "点击登录跳转 P003 (F001-S05)"
   - "点击注册跳转 P004 (F001-S06)"
   - "用户名下拉菜单 (F001-S07)"
   - "当前页面高亮 (F001-S08)"
   - "登录态过期跳转登录 (F001-S09)"

   1.2 快捷入口访问 (F002)
   - "常用功能卡片 (F002-S01)"
   - "个性化推荐 (F002-S02)"
   - "历史查询记录≤5条 (F002-S03)"
   - "点击查询跳转 P002 (F002-S04)"
   - "点击订单跳转 P006 (F002-S05)"
   - "点击历史自动填充查询条件 (F002-S06)"
   - "清除历史需确认弹窗 (F002-S07)"
   - "未登录仅显示基础入口 (F002-S08)"
   - "推荐失败降级默认入口 (F002-S09)"

2. 车票查询页 (P002)
   2.1 车票查询 (F003)
   - "站点模糊搜索 (F003-S01)"
   - "日期选择≤30天 (F003-S05)"
   - "快捷日期：今/明/后 (F003-S06)"
   - "禁用过去日期 (F003-S08)"
   - "类型筛选：高铁/动车/普快 (F003-S09)"
   - "时间段筛选 (F003-S10)"
   - "仅显示有票 (F003-S11)"
   - "校验必填项完整 (F003-S12)"
   - "提交查询显示加载 (F003-S13)"
   - "显示车次信息 (F003-S16)"
   - "显示余票信息 (F003-S17)"
   - "出发地≠目的地 (F003-S21)"

   2.2 车次筛选 (F004)
   - "类型多选 (F004-S01,S02)"
   - "出发时间段筛选 (F004-S04)"
   - "席别筛选 (F004-S08)"
   - "出发/到达站筛选 (F004-S10)"
   - "历时范围与价格区间 (F004-S12,S13)"
   - "实时过滤显示数量 (F004-S15,S16)"
   - "空结果提示放宽条件 (F004-S18)"

   2.3 车票预订 (F005)
   - "未登录跳转登录 (F005-S01)"
   - "检查余票与乘车人完整 (F005-S02,S03)"
   - "显示席别及选择数量 (F005-S05,S06)"
   - "加载常用乘车人 (F005-S09)"
   - "显示订单明细与协议勾选 (F005-S14,S15)"
   - "锁票成功跳转 P005 (F005-S16)"
   - "余票不足提示 (F005-S17)"

   2.4 中转换乘查询 (F006)
   - "直达无结果自动推荐 (F006-S01)"
   - "手动选择中转方案 (F006-S02)"
   - "显示节省指标 (F006-S03)"
   - "查询枢纽站与换乘时间 (F006-S04,S05)"
   - "生成≤5个方案排序 (F006-S06,S07)"
   - "不足换乘时间警告 (F006-S16)"

3. 登录页 (P003)
   3.1 用户登录 (F007)
   - "密码登录与记住密码 (F007-S01,S03)"
   - "失败≥3次启用图形验证码 (F007-S04)"
   - "短信登录与发送验证码 (F007-S05,S06,S07,S08)"
   - "前端表单与后端校验 (F007-S11,S12)"
   - "生成会话token (F007-S13)"

4. 注册页 (P004)
   4.1 用户注册 (F008)
   - "手机号校验与查重 (F008-S01,S02)"
   - "发送验证码与有效期 (F008-S03,S04,S05)"
   - "密码规则与强度 (F008-S06,S07,S08)"
   - "确认密码 (F008-S09)"
   - "后端创建账户 (F008-S17)"

5. 订单填写页 (P005)
   5.1 订单填写 (F009)
   - "车次与席别信息 (F009-S01,S02)"
   - "票价明细与倒计时 (F009-S03,S04)"
   - "红色警告与自动释放 (F009-S05,S06)"
   - "乘车人与票种 (F009-S07,S12)"
   - "联系人手机号与草稿 (F009-S15,S22)"

   5.2 提交订单 (F010)
   - "必填/证件/超时/余票校验 (F010-S01..S05)"
   - "生成订单号/锁座/创建记录/设置超时 (F010-S06..S09)"
   - "防抖禁用按钮 (F010-S16)"

6. 个人中心 (P006)
   6.1 个人信息管理 (F011)
   - "基本信息与认证状态 (F011-S01..S08)"
   - "修改密码流程 (F011-S16,S17)"

   6.2 乘客管理 (F012)
   - "列表与卡片显示 (F012-S01..S06)"
   - "新增乘客与证件校验 (F012-S08..S14)"

   6.3 订单管理 (F013)
   - "筛选/搜索/排序/分页 (F013-S01..S14)"
   - "展开详情与操作按钮 (F013-S15,S23,S24)"

   6.4 订单支付 (F014)
   - "支付方式与确认信息 (F014-S01..S06,S09..S12)"
   - "创建支付/跳转/轮询/成功/失败 (F014-S13..S17,S20,S22)"

   6.5 车票改签 (F015)
   - "资格校验与规则说明 (F015-S01..S05)"
   - "候选车次与差价计算 (F015-S06..S12)"
   - "确认提交与成功结果 (F015-S15,S16)"

   6.6 用户登出 (F016)
   - "触发/确认/清理/跳转 (F016-S01..S07)"
   - "网络异常本地强制登出 (F016-S08)"

---
📅 2025-11-22 | v1.0