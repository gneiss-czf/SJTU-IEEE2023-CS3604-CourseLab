# 12306 Demo - æµ‹è¯•é©±åŠ¨å¼€å‘ç‰ˆæœ¬

è¿™æ˜¯ä¸€ä¸ªåŸºäºæµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰åŸåˆ™æ„å»ºçš„12306è´­ç¥¨ç³»ç»Ÿæ¼”ç¤ºé¡¹ç›®ã€‚é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–æŠ€æœ¯æ ˆï¼Œæä¾›å®Œæ•´çš„å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå¹¶åŒ…å«å…¨é¢çš„æµ‹è¯•ç”¨ä¾‹ã€‚

## ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

- **æµ‹è¯•å…ˆè¡Œ**: ä¸¥æ ¼éµå¾ªTDDåŸåˆ™ï¼Œå…ˆå†™æµ‹è¯•ï¼Œå†å®ç°åŠŸèƒ½
- **å…¨æ ˆè¦†ç›–**: åŒ…å«å‰ç«¯ã€åç«¯ã€æ•°æ®åº“çš„å®Œæ•´å®ç°
- **ç°ä»£æŠ€æœ¯æ ˆ**: React + TypeScript + Node.js + SQLite
- **å®Œæ•´æµ‹è¯•ä½“ç³»**: å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•
- **æœ¬åœ°åŒ–è¿è¡Œ**: æ— éœ€å¤–éƒ¨æœåŠ¡ä¾èµ–ï¼Œå¼€ç®±å³ç”¨
- **å­¦ä¹ å‹å¥½**: è¯¦ç»†çš„æ–‡æ¡£å’Œæ³¨é‡Šï¼Œé€‚åˆå­¦ä¹ å’Œæ•™å­¦

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React 18** + **TypeScript** - ç°ä»£åŒ–å‰ç«¯æ¡†æ¶
- **Ant Design** - ä¼ä¸šçº§UIç»„ä»¶åº“
- **React Router** - å•é¡µé¢åº”ç”¨è·¯ç”±
- **Zustand** - è½»é‡çº§çŠ¶æ€ç®¡ç†
- **Axios** - HTTPè¯·æ±‚åº“
- **Vite** - å¿«é€Ÿæ„å»ºå·¥å…·

### åç«¯æŠ€æœ¯æ ˆ
- **Node.js** + **Express.js** - æœåŠ¡ç«¯æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Prisma ORM** - ç°ä»£åŒ–æ•°æ®åº“æ“ä½œ
- **SQLite** - è½»é‡çº§æ•°æ®åº“
- **JWT** - èº«ä»½è®¤è¯
- **bcrypt** - å¯†ç åŠ å¯†

### æµ‹è¯•æ¡†æ¶
- **Jest** (åç«¯) + **Vitest** (å‰ç«¯) - å•å…ƒæµ‹è¯•
- **React Testing Library** - ç»„ä»¶æµ‹è¯•
- **Supertest** - APIæµ‹è¯•
- **Playwright** - ç«¯åˆ°ç«¯æµ‹è¯•

## ğŸ“ é¡¹ç›®ç»“æ„

```
12306_demo/
â”œâ”€â”€ backend/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/     # APIæ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ services/        # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ middleware/      # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ routes/          # è·¯ç”±å®šä¹‰
â”‚   â”‚   â””â”€â”€ types/           # TypeScriptç±»å‹
â”‚   â”œâ”€â”€ test/                # åç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ prisma/              # æ•°æ®åº“æ¨¡å¼å’Œç§å­æ•°æ®
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/                # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/        # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ stores/          # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ types/           # TypeScriptç±»å‹
â”‚   â”œâ”€â”€ test/                # å‰ç«¯æµ‹è¯•
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ test/                    # é›†æˆå’Œç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ e2e/                 # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â””â”€â”€ ui-completeness/     # UIå®Œæ•´æ€§æµ‹è¯•
â”œâ”€â”€ scripts/                 # å·¥å…·è„šæœ¬
â”œâ”€â”€ docs/                    # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm >= 8.0.0

### å®‰è£…å’Œè¿è¡Œ

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd 12306_demo
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   # å®‰è£…åç«¯ä¾èµ–
   cd backend
   npm install
   
   # å®‰è£…å‰ç«¯ä¾èµ–
   cd ../frontend
   npm install
   
   # è¿”å›æ ¹ç›®å½•
   cd ..
   ```

3. **è®¾ç½®æµ‹è¯•ç¯å¢ƒ**
   ```bash
   # è¿è¡Œç¯å¢ƒè®¾ç½®è„šæœ¬
   node scripts/setup-test-env.js
   ```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   # å¯åŠ¨åç«¯æœåŠ¡å™¨ (ç«¯å£ 3001)
   cd backend
   npm run dev
   
   # æ–°å¼€ç»ˆç«¯ï¼Œå¯åŠ¨å‰ç«¯æœåŠ¡å™¨ (ç«¯å£ 5173)
   cd frontend
   npm run dev
   ```

5. **è®¿é—®åº”ç”¨**
   - å‰ç«¯åº”ç”¨: http://localhost:5173
   - åç«¯API: http://localhost:3001/api

## ğŸ§ª æµ‹è¯•ç³»ç»Ÿ

### æµ‹è¯•ç±»å‹

1. **å•å…ƒæµ‹è¯•** - æµ‹è¯•å•ä¸ªå‡½æ•°å’Œç»„ä»¶
2. **é›†æˆæµ‹è¯•** - æµ‹è¯•å‰åç«¯ååŒå·¥ä½œ
3. **ç«¯åˆ°ç«¯æµ‹è¯•** - æµ‹è¯•å®Œæ•´ç”¨æˆ·æµç¨‹
4. **UIå®Œæ•´æ€§æµ‹è¯•** - ç¡®ä¿æ‰€æœ‰åŠŸèƒ½éƒ½æœ‰å¯¹åº”ç•Œé¢

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
node scripts/run-all-tests.js

# è¿è¡Œåç«¯å•å…ƒæµ‹è¯•
cd backend && npm test

# è¿è¡Œå‰ç«¯å•å…ƒæµ‹è¯•
cd frontend && npm test

# è¿è¡Œé›†æˆæµ‹è¯•
npm run test:integration

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npx playwright test

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### æµ‹è¯•è´¦å·

ç³»ç»Ÿé¢„ç½®äº†ä»¥ä¸‹æµ‹è¯•è´¦å·ï¼š

| æ‰‹æœºå· | å¯†ç  | å§“å | èº«ä»½è¯å· |
|--------|------|------|----------|
| 13800138001 | 123456 | å¼ ä¸‰ | 110101199001011234 |
| 13800138002 | 123456 | æå›› | 110101199002022345 |
| 13800138003 | 123456 | ç‹äº” | 110101199003033456 |

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### ç”¨æˆ·åŠŸèƒ½
- [x] ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- [x] æ‰‹æœºéªŒè¯ç éªŒè¯
- [x] ä¸ªäººä¿¡æ¯ç®¡ç†
- [x] ä¹˜è½¦äººç®¡ç†

### è½¦ç¥¨åŠŸèƒ½
- [x] è½¦ç¥¨æŸ¥è¯¢
- [x] è½¦æ¬¡ä¿¡æ¯å±•ç¤º
- [x] åº§ä½ç±»å‹é€‰æ‹©
- [x] ç¥¨ä»·è®¡ç®—

### è®¢å•åŠŸèƒ½
- [x] è®¢å•åˆ›å»º
- [x] è®¢å•æ”¯ä»˜ï¼ˆæ¨¡æ‹Ÿï¼‰
- [x] è®¢å•æŸ¥è¯¢
- [x] è®¢å•ç®¡ç†

### ç³»ç»ŸåŠŸèƒ½
- [x] æ•°æ®æŒä¹…åŒ–
- [x] é”™è¯¯å¤„ç†
- [x] æ—¥å¿—è®°å½•
- [x] å®‰å…¨è®¤è¯

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

- **å•å…ƒæµ‹è¯•è¦†ç›–ç‡**: â‰¥ 80%
- **é›†æˆæµ‹è¯•è¦†ç›–ç‡**: â‰¥ 70%
- **ç«¯åˆ°ç«¯æµ‹è¯•è¦†ç›–ç‡**: â‰¥ 90% (å…³é”®ç”¨æˆ·æµç¨‹)
- **UIå®Œæ•´æ€§**: 100% (æ‰€æœ‰åç«¯åŠŸèƒ½éƒ½æœ‰å¯¹åº”å‰ç«¯ç•Œé¢)

## ğŸ”§ å¼€å‘å·¥å…·

### ä»£ç è´¨é‡
- **ESLint** - ä»£ç è§„èŒƒæ£€æŸ¥
- **Prettier** - ä»£ç æ ¼å¼åŒ–
- **TypeScript** - ç±»å‹æ£€æŸ¥
- **Husky** - Gité’©å­

### æµ‹è¯•å·¥å…·
- **Jest** - JavaScriptæµ‹è¯•æ¡†æ¶
- **Vitest** - ViteåŸç”Ÿæµ‹è¯•å·¥å…·
- **React Testing Library** - Reactç»„ä»¶æµ‹è¯•
- **Playwright** - ç«¯åˆ°ç«¯æµ‹è¯•
- **Supertest** - HTTPæ–­è¨€åº“

### å¼€å‘ä½“éªŒ
- **Hot Reload** - çƒ­é‡è½½
- **Source Maps** - æºç æ˜ å°„
- **TypeScript IntelliSense** - æ™ºèƒ½æç¤º
- **è‡ªåŠ¨åŒ–æµ‹è¯•** - ä¿å­˜æ—¶è‡ªåŠ¨è¿è¡Œæµ‹è¯•

## ğŸ“ˆ é¡¹ç›®æŒ‡æ ‡

### æ€§èƒ½æŒ‡æ ‡
- é¡µé¢åŠ è½½æ—¶é—´ < 2ç§’
- APIå“åº”æ—¶é—´ < 500ms
- æ•°æ®åº“æŸ¥è¯¢æ—¶é—´ < 100ms

### è´¨é‡æŒ‡æ ‡
- ä»£ç è¦†ç›–ç‡ > 80%
- é›¶å®‰å…¨æ¼æ´
- é›¶å†…å­˜æ³„æ¼
- 100% TypeScriptè¦†ç›–

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. **Fork** é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. **å…ˆå†™æµ‹è¯•** - éµå¾ªTDDåŸåˆ™
4. å®ç°åŠŸèƒ½ä»£ç 
5. ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
6. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
7. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
8. åˆ›å»º **Pull Request**

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript ç¼–å†™æ‰€æœ‰ä»£ç 
- éµå¾ª ESLint å’Œ Prettier é…ç½®
- ä¸ºæ‰€æœ‰å…¬å…±å‡½æ•°ç¼–å†™ JSDoc æ³¨é‡Š
- æµ‹è¯•è¦†ç›–ç‡ä¸å¾—ä½äº 80%
- æ‰€æœ‰åŠŸèƒ½å¿…é¡»æœ‰å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹

## ğŸ“š å­¦ä¹ èµ„æº

### æµ‹è¯•é©±åŠ¨å¼€å‘
- [TDD åŸºç¡€æ¦‚å¿µ](docs/tdd-basics.md)
- [æµ‹è¯•é‡‘å­—å¡”](docs/test-pyramid.md)
- [æµ‹è¯•æœ€ä½³å®è·µ](docs/testing-best-practices.md)

### æŠ€æœ¯æ–‡æ¡£
- [API æ¥å£æ–‡æ¡£](docs/api-documentation.md)
- [æ•°æ®åº“è®¾è®¡](docs/database-design.md)
- [å‰ç«¯æ¶æ„](docs/frontend-architecture.md)
- [åç«¯æ¶æ„](docs/backend-architecture.md)

## ğŸ› é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   # é‡æ–°åˆå§‹åŒ–æ•°æ®åº“
   cd backend
   npx prisma db push --force-reset
   npx tsx prisma/seed.ts
   ```

2. **ç«¯å£å ç”¨**
   ```bash
   # æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
   netstat -ano | findstr :3001
   netstat -ano | findstr :5173
   
   # ç»ˆæ­¢è¿›ç¨‹
   taskkill /PID <PID> /F
   ```

3. **ä¾èµ–å®‰è£…å¤±è´¥**
   ```bash
   # æ¸…ç†ç¼“å­˜é‡æ–°å®‰è£…
   npm cache clean --force
   rm -rf node_modules package-lock.json
   npm install
   ```

4. **æµ‹è¯•å¤±è´¥**
   ```bash
   # é‡æ–°è®¾ç½®æµ‹è¯•ç¯å¢ƒ
   node scripts/setup-test-env.js
   
   # è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
   npm test -- --testPathPattern=specific-test.test.ts
   ```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- React å›¢é˜Ÿæä¾›çš„ä¼˜ç§€å‰ç«¯æ¡†æ¶
- Express.js ç¤¾åŒºçš„ç®€æ´åç«¯è§£å†³æ–¹æ¡ˆ
- Prisma å›¢é˜Ÿçš„ç°ä»£åŒ– ORM å·¥å…·
- Playwright å›¢é˜Ÿçš„å¼ºå¤§æµ‹è¯•å·¥å…·
- æ‰€æœ‰å¼€æºè´¡çŒ®è€…çš„æ— ç§å¥‰çŒ®

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®ï¼Œä»…ç”¨äºå­¦ä¹ å’Œæ•™å­¦ç›®çš„ã€‚è¯·å‹¿ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ– Pull Requestã€‚